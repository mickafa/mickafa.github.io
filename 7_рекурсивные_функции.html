<html lang="ru">
<body style="background-color: lightgrey";>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

 
<style>
    A {
    text-decoration: none; /* Убирает подчеркивание для ссылок */
   } 
</style>


Одним из основных назначений функций является упрощение написания программ. Причём иногда по этому пути можно зайти настолько далеко, что функция сама будет за вас составлять алгоритм.
Например, вам не нужно заботиться о написании цикла, а нужно всего лишь указать какие должны быть соблюдены соотношения между переменными. <br><br>

Это очень математичный метод, он находит популярность в первую очередь среди математиков, потому что такие программы пишутся и читаются легко, они понятны и просты. 
(Но метод имеет и ограничения, о которых поговорим позже).<br><br>

Вернёмся к примеру: найти сумму чисел от 1 до n. Вы уже умеете решать такую задачу с помощью цикла. Для этого нужно вначале создать пустой 
аккумулятор, запустить цикл от 1 до n, на каждой итерации добавлять в аккумулятор текущее значение переменной, и тогда после завершения цикла в аккумуляторе будет содержаться ответ.<br><br>

Теперь будем рассуждать по-другому:<br>
Если заданное число n равно 1, то ответом очевидно является 1.<br>
В остальных случаях ответом является заданное число n, плюс сумма чисел от 1 до n-1.<br>
Это и есть всё решение!<br><br>

Запишем это на питоне. Назовём функцию, решающую задачу, f().<br>

<b>
def f ( n ):<br>
&emsp;&emsp;if n == 1:<br>
&emsp;&emsp;&emsp;&emsp;return 1<br>
&emsp;&emsp;return n + f ( n-1 )</b><br><br>

Чтобы получить ответ для, например, n = 10, напишем основную программу, которая будет состоять из всего лишь одной строки:<br><br>

<b>
print ( f ( 10 ) )<br><br>
</b>

Запустим программу, и получим ответ 55. Если запустим программу для числа 100, то получим ответ 5050.<br><br> 

Заметим, что функция f() в четвёртой строке вызывает функцию f(), то есть саму себя. В программировании функции, вызывающие сами себя, называются <b>рекурсивными</b>. В математике существуют формулы, которые не дают прямой ответ,
а аналогичным образом выражают ответ через предыдущее, меньшее число, такие формулы называются <b>рекуррентными</b>.<br><br>

Обязательное правило при написании рекурсивных функций: <u>условие проверки минимального (то есть остановочного) условия рекурсии должно быть проверено раньше, чем функция 
будет рекурсивно вызвана</u>, в противном случае программа зациклится, потому что условие остановки не будет проверено никогда.<br><br><br>


<b>Задача. Водопроводчик Джо.</b><br><br>
Водопроводчик Джо любит соединять трубы. Конечно, ведь это же его работа. Он уже проложил много трубопроводов, пересекающих его родной Техас в разных направлениях. Ковбои 
ругают Джо, потому, что не проходит и дня, чтобы чья-нибудь лошадь не споткнулась о трубу. 
А ещë говорят, что Джо работает так усердно потому, что правительство платит ему 20 долларов за каждый стык.<br><br>

Джо получил заказ проложить новый трубопровод длиной <i>t</i> футов. В распоряжении Джо имеется бесконечное количество кусков труб, длины которых составляют: 1, 2, 3, ... и т.д. футов.
Все куски разные, каждой длины по одной штуке. Пилить трубы на меньшие части не разрешается. Джо хитрый, поэтому чтобы заработать больше денег, он постарается собрать трубопровод из 
максимально возможного количества кусков, ведь за каждый стык (не считая концов трубопровода) он получит 20 долларов. Очевидно, что для этого Джо будет стараться использовать 
куски как можно меньшей длины.<br><br> 

Например, трубопровод длиной t = 1 фут Джо проложит бесплатно, потому что он не сможет сделать в нëм ни один стык. 
На трубопроводе длиной t = 2 фута Джо тоже ничего не заработает. А вот трубопровод длиной 3 фута он уже сможет собрать с одним стыком: 1+2 и заработает 20 долларов. 
Также по 20 долларов Джо заработает на трубопроводах t = 4 и 5 футов, потому что 4=1+3, а 5=1+4. Трубопровод длиной 6 футов он сможет собрать уже как 1+2+3 и заработает 
на двух стыках 40 долларов. <br><br>

Сколько долларов заработает Джо на прокладке трубопровода длиной <u>ровно</u> t=1000 футов?<br><br>

Программу можно написать с использованием цикла, но намного проще использовать рекурсию. Давайте будем искать количество кусков труб, которые сможет использовать Джо. Такой трубопровод
будет иметь стыков на 1 меньше, чем количество кусков, а ответом будет количество стыков, умноженное на 20.<br><br>

Рассуждаем следующим образом: пусть Джо имеет <u>минимальный</u> кусок трубы длиной <i>n</i> и ему нужно проложить трубопровод длиной <i>t</i>. Тогда может быть два случая:<br>
1. Если невозможно установить этот минимальный кусок трубы потому что <i>t < n</i>, то ответом будет 0, потому что Джо придётся просто заменить предыдущий кусок на более длинный, и на 
этом прокладка трубопровода будет завершена. <br>
2. В противном случае Джо устанавливает этот кусок трубы, и далее минимальным у него остаётся кусок длиной <i>n+1</i>, и ему теперь осталось проложить трубопровод длиной <i>t-n</i>. 
Ответом в этом случае является <i>1</i>, плюс решение такой же задачи для минимального куска <i>n+1</i> и трубопровода длиной <i>t-n</i>.<br><br>

Логика очень проста. Напишем по этой логике рекурсивную функцию. Дадим ей имя f(), и она будет иметь два аргумента: минимальный кусок трубы <i>n</i> и длина трубопровода, 
который необходимо проложить <i>t</i>.<br><br>


<b>
def f ( n, t ):<br>
&emsp;&emsp;if t < n:<br>
&emsp;&emsp;&emsp;&emsp;return 0<br>
&emsp;&emsp;return 1 + f ( n+1, t-n )</b><br><br>

Теперь напишем основную программу. В начале задачи минимальный кусок трубы имеет длину 1, а трубопровод длину t, поэтому вызывать функцию нужно именно с этими аргументами. 
Вызов функции f(1,t) даст нам количество кусков, из которых будет состоять трубопровод длиной t. Количество стыков на 1 меньше количества кусков, поэтому сразу вычтем 1. 
Чтобы получить окончательный ответ в долларах, нам осталось умножить переменную х на 20.
<br><br>

<b>
t = 1000<br>
x = f ( 1, t ) - 1<br>
print ( x * 20 )<br>
</b><br>

Любую программу обязательно тестируем. Для t = 1 и для t = 2 ответ должен быть 0. Для t = 3, 4, 5 ответ 20 долларов. Для t = 6, 7 ответ 40. Если тесты на малых числах проходят  
правильно, то запускаем программу при t = 1000 и получем ответ 860.<br><br><br>




<b><u>Домашнее задание:</u></b><br><br>

1. Упражнение. Используя программу с рекурсивной функцией определите сколько долларов заработает Джо на прокладке трубопровода длиной: а) t = 5050 футов? б) t = 100 тысяч футов? в) t = 200 тысяч футов?
<br><br>

2. Составьте рекурсивную функцию и с её помощью определите чему равно произведение всех целых чисел от 1 до n. (Такая функция в математике называется факториалом).<br>
Тесты:<br>
Для n = 1 ответ 1.<br> 
Для n = 2 ответ 2.<br>
Для n = 3 ответ 6.<br>
Для n = 5 ответ 120.<br>
Найдите ответ для n = 15<br><br>

3. Без программирования, только используя математику найдите чему равно произведение всех целых чисел от -100 до 100. Ответ объясните.<br><br>

4. Без программирования, только используя математику определите на сколько нулей заканчивается факториал числа 100 (то есть произведение всех натуральных чисел от 1 до 100). Ответ объясните. <br><br>

</body>
</html>
