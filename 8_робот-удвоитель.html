<html lang="ru">
<body style="background-color: lightgrey";>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

 
<style>
    A {
    text-decoration: none; /* Убирает подчеркивание для ссылок */
   } 
</style>


<b>Робот-удвоитель.</b><br><br>

Робот-удвоитель стоит на клетке 1 бесконечной дорожки из натуральных чисел. Заднего хода у робота нет, он может идти только вперёд. У робота имеется две возможности как
сделать ход: он может либо перейти в соседниюю клетку (ход "+1"), либо в клетку с удвоенным номером (ход "*2"). Например, из клетки 10 робот может за один ход перейти либо в 11, либо в 20.<br><br>

Необходимо ответить на два вопроса:<br>
а) Сколько у робота существует вариантов маршрутов из клетки 1 в клетку n?<br>
б) Каково минимальное число ходов, за которые робот может попасть из клетки 1 в клетку n?<br><br>

Эта задача относится к классу задач оптимизации - когда нужно найти наилучшее решение из большого множества возможных. На информатике вы уже познакомились со способом
решения такой задачи построением таблицы, а мы сейчас решим её с помощью рекурсивной функции. В самом деле, не будете же вы вручную строить таблицу для большого числа n, верно? 
Поручим эту работу питону.<br><br><br>

а) Обычно для решения сколько-нибудь сложной задачи мы пишем функцию, так же поступим и сейчас. Дадим функции, вычисляющей количество вариантов маршрутов из клетки 1 в клетку n, имя ways() и 
рассмотрим что функция должна вернуть в качестве ответа. <br><br>

Очевидно, что если нужно идти в клетку 1, то ответом будет 1, потому что существует единственный вариант маршрута из клетки 1 в клетку 1 - это не сделать ни одного шага. 
Маршрут из нуля шагов тоже является маршрутом, хоть и пустым.<br><br>

В клетку с чётным номером робот может попасть двумя вариантами: из предыдущей клетки, сделав ход "+1", или из клетки с номером в два раза меньшим, сделав ход "*2", поэтому функция 
должна в качестве ответа дать сумму маршрутов, ведущих в клетки номер n-1 и n // 2. <br><br>

Последний оставшийся вариант: в клетку с нечётным номером робот может попасть только из предыдущей, потому что нечётное число невозможно получить удвоением никакого меньшего. Поэтому 
для нечётной клетки количество маршрутов равно количеству маршрутов в предыдущую чётную клетку, а из неё последним шагом будет "+1" в клетку n. Значит для нечётного 
n функция должна дать такой же ответ, как для предыдущей чётной, то есть n-1. <br><br>

Так и запишем:<br><br>

<b>
def ways ( n ):<br>
&emsp;&emsp;if n == 1:<br>
&emsp;&emsp;&emsp;&emsp;return 1<br>
&emsp;&emsp;if n % 2 == 0:<br>
&emsp;&emsp;&emsp;&emsp;return ways ( n-1 ) + ways ( n//2 )<br>
&emsp;&emsp;return ways ( n-1 )</b><br><br>

Функция готова, протестируем её.<br>
<b>print ( ways(1))</b> # ответ 1<br>
<b>print ( ways(2))</b> # ответ 2<br>
Это верно, ведь из клетки 1 в клетку 2 робот может попасть двумя вариантами: ходом "+1" или ходом "*2".<br>
<b>print ( ways(3))</b> # ответ 2<br>
<b>print ( ways(4))</b> # ответ 4<br>
Всё верно. Теперь можем найти ответ для любого n. Например, для n = 150 ответ 54502.<br><br><br>

б) Теперь найдём минимальное число ходов, за которые робот может попасть из 1 в клетку n. Для ответа на этот вопрос опять напишем функцию, пусть её имя будет minway().<br><br>

Какое количество ходов должен сделать робот чтобы попасть из клетки 1 в клетку 1? Очевидно, что 0, то есть роботу не нужно делать ни одного хода.<br><br>

Какое количество ходов потребуется роботу чтобы попасть в нечётную клетку? Мы уже знаем, что в нечётную клетку робот может попасть только из предыдущей чётной, поэтому
ему потребуется столько ходов, сколько нужно чтобы попасть в предыдущую чётную, плюс один ход.<br><br>

А что для чётной клетки? Так как в чётную клетку робот может попасть двумя вариантами: ходом "+1" или ходом "*2", а мы ищем минимальное количество ходов, то нам нужно
выбрать из этих двух вариантов минимальный, и не забыть добавить в ответ 1, потому что роботу же нужно сделать последний шаг. <br><br>

Чтобы определить минимальное значение из двух, напишем вспомогательную функцию min():<br>
 
<b>
def min ( a, b ):<br>
&emsp;&emsp;if a < b:<br>
&emsp;&emsp;&emsp;&emsp;return a<br>
&emsp;&emsp;return b</b><br><br>

Функция min() должна быть записана выше, чем minway(), чтобы питон при работе с функцией minway() уже знал что такое min(). Осталось только записать решающую функцию minway().<br><br>

<b>
def minway ( n ):<br>
&emsp;&emsp;if n == 1:<br>
&emsp;&emsp;&emsp;&emsp;return 0<br>
&emsp;&emsp;if n % 2 == 1:<br>
&emsp;&emsp;&emsp;&emsp;return minway ( n-1 ) + 1<br>
&emsp;&emsp;return min ( minway ( n-1 ), minway ( n // 2 ) ) + 1 </b><br><br>

Тестируем программу:<br>
<b>print ( minway(1))</b> # ответ 0<br>
<b>print ( minway(2))</b> # ответ 1<br>
<b>print ( minway(3))</b> # ответ 2<br>
<b>print ( minway(4))</b> # ответ 2<br>
Это верно, ведь из 1 можно попасть в 2 и затем применив ход "*2" попасть в 4. Всё правильно. Найдём теперь ответ для n = 150, ответ 10.<br><br><br>



<b><u>Домашнее задание:</u></b><br><br>

<b>1. Упражнение.</b> Для робота-удвоителя найдите: <br>
а) количество вариантов возможных маршрутов из клетки 1 в клетку 313;<br> 
б) минимальное число ходов, за которые робот может попасть из клетки 1 в клетку 313.<br><br>


<b>2. Задача.</b> На дорожке из натуральных чисел, по которой ходит робот-удвоитель, химики неудачно сделали лабораторную работу, 
в результате которой клетка 156 превратилась в колодец, заполненный соляной кислотой. Теперь робот не может становиться в эту клетку, иначе 
он упадёт в кислоту, растворится и превратится в раствор хлорида железа. Теперь все его маршруты должны миновать клетку 156, то есть он должен перепрыгивать 156. Найдите:<br>
а) количество вариантов возможных маршрутов из клетки 1 в клетку 313, не проходящих через клетку 156;<br> 
б) минимальное число ходов, за которые робот может попасть из клетки 1 в клетку 313, чтобы робот не делал ход в клетку 156.<br><br>

<b>3.</b> Ответьте устно:<br>
Верно ли, что если на дорожке появляются какие-либо препятствия, например как в задаче 2, то количество возможных маршрутов к цели у робота может только уменьшиться,
но не может увеличиться? <br>
Верно ли, что при этом минимальное количество ходов может только увеличится, но не может уменьшится?

</body>
</html>
